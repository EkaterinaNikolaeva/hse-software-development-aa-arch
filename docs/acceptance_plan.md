# Программа испытаний и приёмки

## 1. Виды испытаний

### 1.1. Модульные испытания

Проверка корректности работы отдельных компонентов библиотеки:

- 1.1.1. Реализации каждого алгоритма RSQ:
    - Наивный метод
    - Дерево отрезков (сверху и снизу)
    - Дерево Фенвика
    - Декартово дерево
    - ABL-дерево
    - B-дерево
    - Корневая декомпозиция
- 1.1.2. Корректность выполнения операций:
    - `Query(l, r)` — вычисление суммы элементов на отрезке
    - `Update(i, value)` — обновление элемента массива
- 1.1.3. Обработка краевых случаев:
    - Пустой массив
    - Массив из одного элемента
    - Выход за границы массива
    - `right < left`

**Условия успешного прохождения**:каждый компонент корректно выполняет заявленные функции во всех предусмотренных
тестовых сценариях.

### 1.2. Проверка нефункциональных требований

Проверяется соответствие библиотеки следующим требованиям:

- **1.2.1. Асимптотическая сложность операций:**
    - `Query(l, r)` и `Update(i, value)` для **дерева отрезков, дерева Фенвика, декартова дерева, ABL-дерева, B-дерева
      **: $\mathcal{O}(\log n)$.
    - `Update(i, value)` для **наивного метода**: $\mathcal{O}(1)$, `Query(l, r)`: $\mathcal{O}(r - l)$.
- **1.2.2. Обработка краевых случаев:**
    - Пустой массив, массив длины 1.
    - Запросы за пределами массива.
    - Сценарии с `right < left`.
- **1.2.3. Удобство использования:**
    - Реализовано простое и понятное API с документацией.
    - Библиотека является **header-only** и подключается через заголовочные файлы.
- **1.2.4. Корректность вычислений:**
    - Гарантируется, если сумма всех элементов на любом отрезке не превышает диапазон `int`.

### 1.3. Функциональное тестирование

Проверяется выполнение всех заявленных функций библиотеки, включая:

- 1.3.1. Корректность вычисления суммы на отрезке для всех реализаций RSQ.
- 1.3.2. Корректность обновления значений элементов.
- 1.3.3. Соответствие времени выполнения операций заявленным асимптотикам.
- 1.3.4. Работа с типом `int`, при этом сумма элементов не выходит за границы диапазона.

### 1.4. Интеграционное тестирование

Проверяется корректность взаимодействия библиотеки с внешним кодом:

- 1.4.1. Подключение библиотеки как header-only.
- 1.4.2. Использование API через стандартные классы (`std::vector`).
- 1.4.3. Совместимость с компиляторами (GCC, Clang, MSVC).

### 1.5. Нагрузочные испытания

Тестируется производительность библиотеки при различных входных данных:

- 1.5.1. Работа на массивах разного размера (до $10^6$ элементов).
- 1.5.2. Большое количество последовательных запросов `Query` и `Update`.
- 1.5.3. Производительность на различных структурах данных.

### 1.6. Бенчмаркинг

- 1.6.1. Запуск тестов производительности через **Google Benchmark**:
- 1.6.2. **Проверка операций:**
    - Бенчмарк должен предоставлять возможность проверки производительности операций `Update` и `Query` для любого
      наследника `IRSQ` без изменения.
- 1.6.3. **Ввод параметров:**
    - Бенчмарк должен поддерживать возможность передачи параметров для тестирования различных сценариев и условий
      использования.
- 1.6.4. **Форматы вывода:**
    - Бенчмарк должен поддерживать вывод результатов в форматах **CSV и JSON**.
- 1.6.5. **Возможность сравнения и анализа:**
    - Бенчмарк должен предоставлять средства для сравнения результатов различных тестов и анализа производительности.

### 1.7. Приемо-сдаточные испытания

Итоговая проверка всех функций библиотеки перед релизом.

--- 
## 2. Общие требования к приёмке

Программное обеспечение считается готовым к использованию, если выполнены следующие условия:

- 2.1. Все функциональные тесты успешно пройдены.
- 2.2. Производительность соответствует заявленным требованиям.
- 2.3. Поддержка краевых случаев реализована корректно.
- 2.4. Документация к API полная и понятная.
- 2.5. Бенчмарки показывают соответствие ожидаемой асимптотике.

**Формат документации**: README с примерами использования и результатами тестов.
